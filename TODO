20060213T122015 [  53: Frederic Marchal] [fetchmail-users] Incorrect header line and lost mails
See if fetchmail still segfaults (see quotes of Frederic Marchal
2006-02-17):
> In fetchmail, the problem is clearly located in transact.c (I wouldn't
> call it a bug until I get some clarification from the one who wrote
> it). The part of the code that rejects the mail is preceded by a comment
> stating
>
>         * At least one brain-dead website (netmind.com) is known to
>         * send out robotmail that's missing the RFC822 delimiter blank
>         * line before the body! Without this check fetchmail segfaults.
>         * With it, we treat such messages as spam and refuse them.
>
> But the test after this comment doesn't test for the beginning of the
> body but for a header line not starting with a blank and not containing
> a colon.

Make fetchmailconf a noarch RPM (needs %ifarch hacks and running
rpmbuild twice).

Add FAQ entry about procmail configuration with 1. ORGMAIL/DEFAULT, 2.
:0e { EXITCODE=75 HOST }, 3. explicit default recipe, 4. LOGFILE
location?

Yves Boisjoly reports that NTLM auth needs to use the real Wks field
rather than duplicating the user name (see l. 211 in smbutil.c).

Merge 6.3.1 -> 6.3.2 changes

Validate --mda/mda option so that single quotes (') around the
placeholders are rejected Debian Bug #347909

Use Errors-To: as envelope sender fallback?

Clean up null envelope handling everywhere to get rid of <> kludge.

Add "polling ... folder XYZ" information to "tracepolls".

Fix Debian Bug#348995: allow read-only IMAP folders in --keep mode.

Fix Debian Bug#349726: recognize X-Envelope-From (instead of
Return-Path) - perhaps add a configuration option.

Make "sleeping at"/"awakened at" configurable WRT log level. Some people
want it at O_NORMAL, some don't. Perhaps use a flag file that other
programs can probe?

Wrap broken messages in a MIME blob and ship them, rather than
discarding them. Rob MacGregor, fetchmail-users 2005-11-10,
<43ea8d070511100843p1eaf920dv@mail.gmail.com>

Make --version print only the version.

Revise SSL logging so users can see the full certificate chain.

Revise translations, so that we don't translate individual words any
more (such as the error handling in driver.c near l. #1550).

Greg Lindahl "more clever resource limitations"
set expunge and/or MTA delay by time rather than message count,
<http://lists.berlios.de/pipermail/fetchmail-users/2005-December/000158.html>

SSL/TLS: support SHA1 fingerprints, too, not just hardcoded MD5

Factor out and rewrite the whole IMAP response parsing code. We need to
support response codes, * BYE and similar.

support/propagate address extensions in multidrop mode (must be
configurable per account, as they are upstream dependent, about everyone
uses +, qmail uses -)

clean up LMTP vs. SMTP, --lmtp as global option is useless, and LMTP
options do not belong into --smtphost. The sink side needs to be more
flexible, perhaps --mailsink {PROTOCOL}host[/port] (are there better
names for this option?), and we may need to specify server-specific
name/password for ESMTP AUTH.  BTW, use libesmtp or SASL to avoid the
AUTH implementation itself?

Support Postfix's XCLIENT/XFORWARD?

clean up protocol vs. authentication (POP3, KPOP, APOP)

Add a warning when mda contains sendmail but not -i, -oi, -O IgnoreDots

IDN

support for CAfile (also multiple)
support multiple CApath directories

Pipeline commands

Allow to query multiple servers simultaneously.

Privilege separation model for added security.

Re-exec ourselves if the executable file changes? Security vs.
convenience.

Check if fetchmail's notion of \Recent vs. * <n> RECENT is a working
model at all. In concurrent sessions, fetchmail might not be notified of
\Recent and will have to check UID instead.

RFC2047 encode X-Fetchmail-Warning?
X-Fetchmail-Warning: Empfängeradresse root@example.org stimmt mit keinem lokalen Namen überein
X-Virus-Scanned: amavisd-new at m2a2.dyndns.org
X-Amavis-Alert: BAD HEADER Non-encoded 8-bit data (char C3 hex) in message header 'X-Fetchmail-Warning': X-Fetchmail-Warning: +Empf\303\244ngeradresse ro...

check if --monitor still works properly
and complete CAN_MONITOR vs. interface checks
complete CAN_MONITOR replacement

put all getaddrinfo compat cruft into an easy-to-use m4 macro for
autoconf and Makefile.am snippet for automake, so people can just use it
without further hassle.

fetchmail -vvvv --syslog prints blank lines on the screen.
uid.c lines 254 and 265?

find a way to abort sink and rollback headers written to BSMTP, kill a
running MDA, and similar, to avoid incomplete messages (perhaps make it
an option to ship the incomplete message nonetheless)

clean up TOP vs. RETR but leave TOP as an option for the server scum
that deletes message right after RETR, voiding client retries (Jakob
Hirsch, 2006-01-03).
